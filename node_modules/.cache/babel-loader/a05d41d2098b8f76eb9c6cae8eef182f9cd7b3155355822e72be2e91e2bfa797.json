{"ast":null,"code":"import React,{useState,useRef}from'react';import axios from'axios';import styles from'./css/MypagReviewWrite.module.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MypagReviewWrite=_ref=>{let{productNo,buyerId,sellerId}=_ref;const[reviewScore,setreviewScore]=useState(0);const[hover,setHover]=useState(0);const reviewText=useRef();const submitReview=async()=>{const review=new URLSearchParams();review.append('productNo',productNo);review.append('buyerId',buyerId);review.append('sellerId',sellerId);review.append('reviewScore',reviewScore);review.append('reviewText',reviewText.current.value);console.log('Review to submit:',review.toString());// 리뷰 객체 콘솔에 출력\ntry{const response=await axios.post('http://localhost:9999/review/insert',review.toString(),{headers:{'Content-Type':'application/x-www-form-urlencoded'}});console.log(response);alert(response.data.msg);if(response.data.result){reviewText.current.value='';// Clear the input\nsetreviewScore(0);setHover(0);// Reset hover\n}}catch(error){console.error('Error submitting review:',error);alert('리뷰 제출에 실패했습니다. 다시 시도해주세요.');}};return/*#__PURE__*/_jsxs(\"div\",{className:styles.reviewContainer,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.reviewScore,children:[...Array(5)].map((star,index)=>{index+=1;return/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:index<=(hover||reviewScore)?styles.on:styles.off,onClick:()=>setreviewScore(index),onMouseEnter:()=>setHover(index),onMouseLeave:()=>setHover(reviewScore),children:/*#__PURE__*/_jsx(\"span\",{className:styles.star,children:\"\\u2605\"})},index);})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",ref:reviewText,placeholder:\"\\uD6C4\\uAE30\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694\"}),/*#__PURE__*/_jsx(\"button\",{onClick:submitReview,className:styles.submitButton,children:\"\\uB9AC\\uBDF0 \\uC81C\\uCD9C\"})]});};export default MypagReviewWrite;","map":{"version":3,"names":["React","useState","useRef","axios","styles","jsx","_jsx","jsxs","_jsxs","MypagReviewWrite","_ref","productNo","buyerId","sellerId","reviewScore","setreviewScore","hover","setHover","reviewText","submitReview","review","URLSearchParams","append","current","value","console","log","toString","response","post","headers","alert","data","msg","result","error","className","reviewContainer","children","Array","map","star","index","type","on","off","onClick","onMouseEnter","onMouseLeave","ref","placeholder","submitButton"],"sources":["D:/workspace/final_4market_frontend/src/components/myPage/MypagReviewWrite.jsx"],"sourcesContent":["import React, { useState, useRef } from 'react';\r\nimport axios from 'axios';\r\nimport styles from './css/MypagReviewWrite.module.css';\r\n\r\nconst MypagReviewWrite = ({ productNo, buyerId, sellerId }) => {\r\n  const [reviewScore, setreviewScore] = useState(0);\r\n  const [hover, setHover] = useState(0);\r\n  const reviewText = useRef();\r\n\r\n  const submitReview = async () => {\r\n    const review = new URLSearchParams();\r\n    review.append('productNo', productNo);\r\n    review.append('buyerId', buyerId);\r\n    review.append('sellerId', sellerId);\r\n    review.append('reviewScore', reviewScore);\r\n    review.append('reviewText', reviewText.current.value);\r\n  \r\n    console.log('Review to submit:', review.toString()); // 리뷰 객체 콘솔에 출력\r\n  \r\n    try {\r\n      const response = await axios.post('http://localhost:9999/review/insert', review.toString(), {\r\n        headers: {\r\n          'Content-Type': 'application/x-www-form-urlencoded'\r\n        }\r\n      });\r\n      console.log(response);\r\n      alert(response.data.msg);\r\n      if (response.data.result) {\r\n        reviewText.current.value = ''; // Clear the input\r\n        setreviewScore(0);\r\n        setHover(0); // Reset hover\r\n      }\r\n    } catch (error) {\r\n      console.error('Error submitting review:', error);\r\n      alert('리뷰 제출에 실패했습니다. 다시 시도해주세요.');\r\n    }\r\n  };\r\n  return (\r\n    <div className={styles.reviewContainer}>\r\n      <div className={styles.reviewScore}>\r\n        {[...Array(5)].map((star, index) => {\r\n          index += 1;\r\n          return (\r\n            <button\r\n              type=\"button\"\r\n              key={index}\r\n              className={index <= (hover || reviewScore) ? styles.on : styles.off}\r\n              onClick={() => setreviewScore(index)}\r\n              onMouseEnter={() => setHover(index)}\r\n              onMouseLeave={() => setHover(reviewScore)}\r\n            >\r\n              <span className={styles.star}>&#9733;</span>\r\n            </button>\r\n          );\r\n        })}\r\n      </div>\r\n      <input type=\"text\" ref={reviewText} placeholder=\"후기를 입력하세요\" />\r\n      <button onClick={submitReview} className={styles.submitButton}>리뷰 제출</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MypagReviewWrite;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}