{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import styles from'./css/CategorySelector.module.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CategorySelector=_ref=>{let{onCategoryChange,onParentChange}=_ref;const[parentNumberOptions,setParentNumberOptions]=useState([]);const[productCategoryList,setProductCategoryList]=useState([]);const[parentNumber,setParentNumber]=useState('1');const[selectedParent,setSelectedParent]=useState('카테고리를 선택하세요');const[selectedCategory,setSelectedCategory]=useState('카테고리를 선택하세요');const[isSecondDropdownVisible,setIsSecondDropdownVisible]=useState(false);useEffect(()=>{const fetchParentNumbers=async()=>{try{const response=await axios.get('http://localhost:9999/category/list');setParentNumberOptions(response.data);}catch(error){console.error('Error fetching parent number options:',error);}};fetchParentNumbers();},[]);useEffect(()=>{const fetchCategories=async()=>{try{const response=await axios.get(\"http://localhost:9999/category/list/\".concat(parentNumber));setProductCategoryList(response.data);}catch(error){console.error('Error fetching categories:',error);}};fetchCategories();},[parentNumber]);const handleParentChange=option=>{setParentNumber(option.categoryNo);setSelectedParent(option.categoryName);setIsSecondDropdownVisible(true);onParentChange(option.categoryNo);};const handleCategoryChange=option=>{setSelectedCategory(option.categoryName);onCategoryChange(option.categoryNo);};return/*#__PURE__*/_jsxs(\"div\",{className:styles.category,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.customDropdown,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.dropdownHeader,children:selectedParent}),/*#__PURE__*/_jsx(\"ul\",{className:styles.dropdownList,children:parentNumberOptions.map(option=>/*#__PURE__*/_jsx(\"li\",{onClick:()=>handleParentChange(option),className:\"\".concat(styles.dropdownItem,\" \").concat(parentNumber===option.categoryNo?styles.selectedItem:''),children:option.categoryName},option.categoryNo))})]}),isSecondDropdownVisible&&/*#__PURE__*/_jsxs(\"div\",{className:styles.customDropdown,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.dropdownHeader,children:selectedCategory}),/*#__PURE__*/_jsx(\"ul\",{className:styles.dropdownList,children:productCategoryList.map(option=>/*#__PURE__*/_jsx(\"li\",{onClick:()=>handleCategoryChange(option),className:\"\".concat(styles.dropdownItem,\" \").concat(selectedCategory===option.categoryName?styles.selectedItem:''),children:option.categoryName},option.categoryNo))})]})]});};export default CategorySelector;","map":{"version":3,"names":["React","useState","useEffect","axios","styles","jsx","_jsx","jsxs","_jsxs","CategorySelector","_ref","onCategoryChange","onParentChange","parentNumberOptions","setParentNumberOptions","productCategoryList","setProductCategoryList","parentNumber","setParentNumber","selectedParent","setSelectedParent","selectedCategory","setSelectedCategory","isSecondDropdownVisible","setIsSecondDropdownVisible","fetchParentNumbers","response","get","data","error","console","fetchCategories","concat","handleParentChange","option","categoryNo","categoryName","handleCategoryChange","className","category","children","customDropdown","dropdownHeader","dropdownList","map","onClick","dropdownItem","selectedItem"],"sources":["D:/workspace/final_4market_frontend/src/components/productRegistration/CategorySelector.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport styles from './css/CategorySelector.module.css';\r\n\r\nconst CategorySelector = ({ onCategoryChange, onParentChange }) => {\r\n    const [parentNumberOptions, setParentNumberOptions] = useState([]);\r\n    const [productCategoryList, setProductCategoryList] = useState([]);\r\n    const [parentNumber, setParentNumber] = useState('1');\r\n    const [selectedParent, setSelectedParent] = useState('카테고리를 선택하세요');\r\n    const [selectedCategory, setSelectedCategory] = useState('카테고리를 선택하세요');\r\n    const [isSecondDropdownVisible, setIsSecondDropdownVisible] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const fetchParentNumbers = async () => {\r\n            try {\r\n                const response = await axios.get('http://localhost:9999/category/list');\r\n                setParentNumberOptions(response.data);\r\n            } catch (error) {\r\n                console.error('Error fetching parent number options:', error);\r\n            }\r\n        };\r\n        fetchParentNumbers();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const fetchCategories = async () => {\r\n            try {\r\n                const response = await axios.get(`http://localhost:9999/category/list/${parentNumber}`);\r\n                setProductCategoryList(response.data);\r\n            } catch (error) {\r\n                console.error('Error fetching categories:', error);\r\n            }\r\n        };\r\n        fetchCategories();\r\n    }, [parentNumber]);\r\n\r\n    const handleParentChange = (option) => {\r\n        setParentNumber(option.categoryNo);\r\n        setSelectedParent(option.categoryName);\r\n        setIsSecondDropdownVisible(true);\r\n        onParentChange(option.categoryNo);\r\n    };\r\n\r\n    const handleCategoryChange = (option) => {\r\n        setSelectedCategory(option.categoryName);\r\n        onCategoryChange(option.categoryNo);\r\n    };\r\n\r\n    return (\r\n        <div className={styles.category}>\r\n            <div className={styles.customDropdown}>\r\n                <div className={styles.dropdownHeader}>{selectedParent}</div>\r\n                <ul className={styles.dropdownList}>\r\n                    {parentNumberOptions.map((option) => (\r\n                        <li\r\n                            key={option.categoryNo}\r\n                            onClick={() => handleParentChange(option)}\r\n                            className={`${styles.dropdownItem} ${parentNumber === option.categoryNo ? styles.selectedItem : ''}`}\r\n                        >\r\n                            {option.categoryName}\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            </div>\r\n\r\n            {isSecondDropdownVisible && (\r\n                <div className={styles.customDropdown}>\r\n                    <div className={styles.dropdownHeader}>{selectedCategory}</div>\r\n                    <ul className={styles.dropdownList}>\r\n                        {productCategoryList.map((option) => (\r\n                            <li\r\n                                key={option.categoryNo}\r\n                                onClick={() => handleCategoryChange(option)}\r\n                                className={`${styles.dropdownItem} ${selectedCategory === option.categoryName ? styles.selectedItem : ''}`}\r\n                            >\r\n                                {option.categoryName}\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CategorySelector;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}