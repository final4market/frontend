{"ast":null,"code":"import React,{Fragment,useState}from'react';import styles from'./css/SubProductInfo.module.css';import Backdrop from'./SubOverlay';import axios from'axios';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const Report=_ref=>{let{isReportOpen,onClose}=_ref;const[expanded,setExpanded]=useState(null);// 단일 섹션만 열리도록 상태 변경\nconst[reportContents,setReportContents]=useState({ad:'',inaccurate:'',prohibited:'',scam:'',other:''});// 텍스트 영역 표시 상태를 토글하는 함수\nconst toggleExpansion=type=>{setExpanded(prevState=>prevState===type?null:type);// 현재 열려 있는 섹션이 클릭되면 닫기, 그렇지 않으면 새 섹션 열기\n};// 텍스트 영역 내용 변경 핸들러\nconst handleContentChange=(type,value)=>{setReportContents(prevState=>({...prevState,[type]:value}));};// console.log(reportContents);\nconst submitReport=async type=>{// 유형에 따른 문구를 반환하는 함수\nconst getTypeText=type=>{const typeText={ad:'광고성 상점이에요.',inaccurate:'상품 정보가 부정확해요.',prohibited:'거래 금지 품목으로 판단돼요.',scam:'사기가 의심돼요.',other:'기타'};return typeText[type]||'기타';};const typeText=getTypeText(type);// console.log(typeText);\ntry{// axios 요청에 params로 전달\nconst response=await axios.post('http://localhost:9999/insertReport',{productNo:'10',claimerId:'member10',sellerId:'member4',reportContent:\"[\".concat(typeText,\"] \").concat(reportContents[type])// 타입에 따른 문구와 내용을 결합\n});// 요청이 성공적으로 완료되면 처리할 로직\nalert(response.data.msg);onClose();}catch(error){console.error(error);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Backdrop,{show:isReportOpen,onClick:onClose}),isReportOpen&&/*#__PURE__*/_jsx(\"div\",{className:styles.report_container,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.report,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uC2E0\\uACE0\\uD558\\uAE30\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.close,onClick:onClose,children:/*#__PURE__*/_jsx(\"img\",{src:\"/img/x.png\",alt:\"close\"})}),/*#__PURE__*/_jsx(\"hr\",{}),['ad','inaccurate','prohibited','scam','other'].map(type=>/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(styles.detailReport,\" \").concat(expanded===type?styles.expandable:''),children:[/*#__PURE__*/_jsx(\"p\",{children:type==='ad'?'광고성 상점이에요.':type==='inaccurate'?'상품 정보가 부정확해요.':type==='prohibited'?'거래 금지 품목으로 판단돼요.':type==='scam'?'사기가 의심돼요.':'기타'}),/*#__PURE__*/_jsx(\"img\",{src:expanded===type?'/img/report_click_arrow.png':'/img/report_arrow.png',alt:\"arrow\",className:styles.report_height,onClick:()=>toggleExpansion(type)}),expanded===type&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"textarea\",{value:reportContents[type],onChange:e=>handleContentChange(type,e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:styles.reportSubmit,onClick:()=>submitReport(type),children:\"\\uB4F1\\uB85D\"})]})]}),/*#__PURE__*/_jsx(\"hr\",{})]},type))]})})]});};export default Report;","map":{"version":3,"names":["React","Fragment","useState","styles","Backdrop","axios","jsx","_jsx","_Fragment","jsxs","_jsxs","Report","_ref","isReportOpen","onClose","expanded","setExpanded","reportContents","setReportContents","ad","inaccurate","prohibited","scam","other","toggleExpansion","type","prevState","handleContentChange","value","submitReport","getTypeText","typeText","response","post","productNo","claimerId","sellerId","reportContent","concat","alert","data","msg","error","console","children","show","onClick","className","report_container","report","close","src","alt","map","detailReport","expandable","report_height","onChange","e","target","reportSubmit"],"sources":["D:/workspace/final_4market_frontend/src/components/subPage/SubReport.jsx"],"sourcesContent":["import React, { Fragment, useState } from 'react';\r\nimport styles from './css/SubProductInfo.module.css';\r\nimport Backdrop from './SubOverlay';\r\nimport axios from 'axios';\r\n\r\nconst Report = ({ isReportOpen, onClose }) => {\r\n  const [expanded, setExpanded] = useState(null); // 단일 섹션만 열리도록 상태 변경\r\n  const [reportContents, setReportContents] = useState({\r\n    ad: '',\r\n    inaccurate: '',\r\n    prohibited: '',\r\n    scam: '',\r\n    other: ''\r\n  });\r\n\r\n  // 텍스트 영역 표시 상태를 토글하는 함수\r\n  const toggleExpansion = (type) => {\r\n    setExpanded(prevState => prevState === type ? null : type); // 현재 열려 있는 섹션이 클릭되면 닫기, 그렇지 않으면 새 섹션 열기\r\n  };\r\n\r\n  // 텍스트 영역 내용 변경 핸들러\r\n  const handleContentChange = (type, value) => {\r\n    setReportContents(prevState => ({\r\n      ...prevState,\r\n      [type]: value\r\n    }));\r\n  };\r\n  // console.log(reportContents);\r\n  const submitReport = async (type) => {\r\n    // 유형에 따른 문구를 반환하는 함수\r\n    const getTypeText = (type) => {\r\n      const typeText = {\r\n        ad: '광고성 상점이에요.',\r\n        inaccurate: '상품 정보가 부정확해요.',\r\n        prohibited: '거래 금지 품목으로 판단돼요.',\r\n        scam: '사기가 의심돼요.',\r\n        other: '기타'\r\n      };\r\n      return typeText[type] || '기타';\r\n    };\r\n    const typeText = getTypeText(type);\r\n    // console.log(typeText);\r\n\r\n    try {\r\n      // axios 요청에 params로 전달\r\n      const response = await axios.post('http://localhost:9999/insertReport', {\r\n        productNo: '10',\r\n        claimerId: 'member10',\r\n        sellerId: 'member4',\r\n        reportContent: `[${typeText}] ${reportContents[type]}` // 타입에 따른 문구와 내용을 결합\r\n      });\r\n\r\n      // 요청이 성공적으로 완료되면 처리할 로직\r\n      alert(response.data.msg);\r\n      onClose();\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      <Backdrop\r\n        show={isReportOpen}\r\n        onClick={onClose}\r\n      />\r\n      {isReportOpen && (\r\n        <div className={styles.report_container}>\r\n          <div className={styles.report}>\r\n            <h2>신고하기</h2>\r\n            <span className={styles.close} onClick={onClose}>\r\n              <img src=\"/img/x.png\" alt=\"close\" />\r\n            </span>\r\n            <hr />\r\n            {['ad', 'inaccurate', 'prohibited', 'scam', 'other'].map(type => (\r\n              <Fragment key={type}>\r\n                <div className={`${styles.detailReport} ${expanded === type ? styles.expandable : ''}`}>\r\n                  <p>{type === 'ad' ? '광고성 상점이에요.' :\r\n                    type === 'inaccurate' ? '상품 정보가 부정확해요.' :\r\n                      type === 'prohibited' ? '거래 금지 품목으로 판단돼요.' :\r\n                        type === 'scam' ? '사기가 의심돼요.' : '기타'}</p>\r\n                  <img\r\n                    src={expanded === type ? '/img/report_click_arrow.png' : '/img/report_arrow.png'}\r\n                    alt=\"arrow\"\r\n                    className={styles.report_height}\r\n                    onClick={() => toggleExpansion(type)}\r\n                  />\r\n                  {expanded === type && (\r\n                    <>\r\n                      <textarea\r\n                        value={reportContents[type]}\r\n                        onChange={(e) => handleContentChange(type, e.target.value)}\r\n                      ></textarea>\r\n                      <button className={styles.reportSubmit} onClick={() => submitReport(type)}>등록</button>\r\n                    </>\r\n                  )}\r\n                </div>\r\n                <hr />\r\n              </Fragment>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Report;\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}